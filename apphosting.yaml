# Príkaz na build celej aplikácie (frontend a backend)
build: npm run build

# Konfiguruje backend
backend:
  # Adresár, kde je umiestnený kód backendu
  root: backend
  # Príkaz na spustenie servera po builde
  run: npm run start
  # ID backendu (z tvojho screenshotu image_9bf070.png)
  id: "backend-firebase"

# Definuje adresár, kde sa nachádza statický frontend
publicDir: frontend/dist

# --- KĽÚČOVÁ ZMENA ---
# Hovoríme App Hostingu, aby nasadil obsah
# na tvoj existujúci "Firebase Hosting" site.
site: "character-studio-comics"

# Pravidlá smerovania
rewrites:
  # Všetky API volania presmeruj na backend
  - source: "/(startCharacterTraining|getTrainedCharacterById|generateImageFromTrainedCharacter|saveVisualization)"
    backend:
      # ID backendu sa musí zhodovať s tým, čo je hore
      id: "backend-firebase"

  # Všetky ostatné požiadavky pošli na index.html (pre React Router)
  - source: "/**"
    destination: "/index.html"
