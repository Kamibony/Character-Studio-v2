build: npm run build

# Povieme App Hostingu, kde je náš statický frontend
publicDir: backend/public

backend:
  id: "backend-firebase"
  root: backend
  run: npm run start

rewrites:
  # 1. PRAVIDLO: Všetky známe API cesty pošli na backend
  # (Zoznam je z backend/src/index.ts a frontend/vite.config.ts)
  - source: "/(startCharacterTraining|getTrainedCharacterById|generateImageFromTrainedCharacter|saveVisualization|getCharacterLibrary|getCharacterById|createCharacterPair|generateCharacterVisualization)"
    backend:
      id: "backend-firebase"

  # 2. PRAVIDLO: Všetko ostatné ber ako SPA (React) a pošli na index.html
  # Toto je kľúčové pre React Router.
  - source: "/**"
    destination: "/index.html"
