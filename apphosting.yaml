# Príkaz na build celej aplikácie (frontend a backend)
build: npm run build

# Konfiguruje backend
backend:
  # Adresár, kde je umiestnený kód backendu
  root: backend
  # Príkaz na spustenie servera po builde
  run: npm run start
  # ID backendu
  id: "backend-firebase"

# Definuje adresár, kde sa nachádza statický frontend
publicDir: frontend/dist

# Pravidlá pre smerovanie API volaní na backend
# Tieto pravidlá majú vyššiu prioritu
rewrites:
  # Všetky API volania presmeruj na backend
  - source: "/(startCharacterTraining|getTrainedCharacterById|generateImageFromTrainedCharacter|saveVisualization)"
    backend:
      # ID backendu sa musí zhodovať s tým, čo je hore
      id: "backend-firebase"

# Pravidlá pre obsluhu statického frontendu (React aplikácie)
# Toto sa aplikuje na všetko, čo nezodpovedá pravidlám vyššie
staticContent:
  rewrites:
  - source: "/**"
    destination: "/index.html"
