# Príkaz na build celej aplikácie (frontend a backend)
build: npm run build

# Konfiguruje backend
backend:
  # Adresár, kde je umiestnený kód backendu
  root: backend
  # Príkaz na spustenie servera po builde
  run: npm run start
  # ID backendu (z tvojho screenshotu image_9cbb49.png)
  id: "backend-firebase"

# Definuje adresár, kde sa nachádza statický frontend
publicDir: frontend/dist

# --- ODSTRÁNILI SME RIADOK 'site: "character-studio-comics"' ---
# Týmto sa všetko nasadí na predvolenú App Hosting URL.

# Pravidlá smerovania
rewrites:
  # Všetky API volania presmeruj na backend
  - source: "/(startCharacterTraining|getTrainedCharacterById|generateImageFromTrainedCharacter|saveVisualization)"
    backend:
      # ID backendu sa musí zhodovať s tým, čo je hore
      id: "backend-firebase"

  # Všetky ostatné požiadavky (vrátane GET /) pošli na index.html
  # Toto je kľúčové pre fungovanie tvojej React aplikácie.
  - source: "/**"
    destination: "/index.html"
